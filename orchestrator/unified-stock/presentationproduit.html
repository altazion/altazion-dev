<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
  
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-17974923-7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
  
      gtag('config', 'UA-17974923-7');
    </script>
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Pr&#233;sentation du produit | Aide - Altazion</title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Pr&#233;sentation du produit | Aide - Altazion">
    <meta name="generator" content="docfx 2.56.7.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  
  
  
  
  
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <ul>
                  <li class="title"><a href="/"><img src="https://aide.altazion.com/logo.png"></a></li>
                  <li class="subtitle"><span>Aide</span></li>
                  <li class="item" id="lnkSiteAide"><a href="https://aide.altazion.com">Utilisateurs</a></li>
                  <li class="item" id="lnkSiteDev"><a href="https://www.altazion.dev">Développeurs</a></li>
                  <li class="item" id="lnkSiteInterne" style="display:none"><a href="https://e-doc-dev.azurewebsites.net">Doc interne</a></li>
                  <li class="item" id="lnkSiteLearning" style="display:none"><a href="https://www.altazion-learning.com">e-learning</a></li>
              </ul>
              
              <script type="text/javascript">
              
                  function checkAndActivate(domain, ctl) {
                      fetch("https://" + domain).then(function (data) {
                          ctl.style.display = null;
                      }).catch(function (e) {
                          return;
                      });
                  }
              
                  var loc = document.location.hostname;
                  loc = loc.toLowerCase();
              
                  if (loc == "aide.altazion.com") {
                      lnkSiteAide.classList.add("selected");
                  }
                  else if (loc == "www.altazion.dev")
                      lnkSiteDev.classList.add("selected");
                  else if (loc == "www.altazion-learning.com") {
                      lnkSiteLearning.style.display = null;
                      lnkSiteLearning.classList.add("selected");
                  }
                  else if (loc == "e-doc-dev.azurewebsites.net") {
                      lnkSiteInterne.style.display = null;
                      lnkSiteInterne.classList.add("selected");
                  }
              
                  checkAndActivate("www.altazion-learning.com", lnkSiteLearning);
                  checkAndActivate("e-doc-dev.azurewebsites.net", lnkSiteInterne);
              
              </script>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle"></a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="présentation-du-produit">Présentation du produit</h1>

<h2 id="généralités">Généralités</h2>
<h3 id="présentation">Présentation</h3>
<p>Unified Stock (US) est l&#39;un des composants d&#39;Orchestrator, l&#39;OMS d&#39;Altazion. Il s&#39;agit d&#39;une suite d&#39;applications à déployer dans votre système d&#39;information qui offre deux fonctionnalités clefs :</p>
<ul>
<li>Bénéficier des stocks en temps réel pour l&#39;ensemble de vos origines de stock et de vos canaux de ventes.</li>
<li>Permettre un recalcule en temps réel de stocks disponibles à la vente (disponibilités) sur vos différents canaux.</li>
</ul>
<p>On parle de stocks en temps réel car l&#39;intégration d&#39;un mouvement de stock dans Unified Stock et le recalcule des disponbilités prend rarement plus d&#39;une seconde.</p>
<p>Ce produit est conçu pour fonctionner avec les Sources d&#39;Approvisionnement et Delivery Optimizer. Il est donc indispensable d&#39;utiliser ces derniers pour bénéficier des avantages offerts par Unified Stock.</p>
<p>Pour plus d&#39;information sur Delivery Optimizer et les Sources d&#39;Approvisionnement, consultez les pages de documentations qui leurs sont dédiées.</p>
<h3 id="configuration">Configuration</h3>
<p>Pour utiliser Unified Stock, vous devrez configurer quatre options système :</p>
<ul>
<li><strong>UnifiedStockUrl</strong>, qui correspond à l&#39;adresse de votre module de traitement des stocks (voir page de documentation dédiée)</li>
<li><strong>UnifiedStockCredentials</strong>, qui contient les identifiants de connexion au module de traitement des stocks (voir page de documentation dédiée)</li>
<li><strong>UnifiedStockIncludeAvailabilities</strong>, booléen à placer à :
<strong>true</strong> pour transférer les quantités de stocks contenu dans la base de données SQL après l&#39;exécution des sources d&#39;approvisionnement.
<strong>false</strong> si vous souhaiter alimenter Unified Stock en utilisant les points API du module de traitement des stocks.</li>
<li><strong>UnifiedStockIncludeIgnoredStocks</strong> : permet de transférer également les stocks exclus par l&#39;exécution de la source d&#39;approvisionnement :
<strong>true</strong> pour transférer tous les stocks valides, même si le produit n&#39;est pas concerné par une règle d&#39;approvisionnement ou s&#39;il a été exclu par la règle.
<strong>false</strong> (valeur par défaut) pour ne transférer que les stocks pertinent pour le calcul des disponibilités.
<strong>Altazion recommande de laisser la valeur par défaut (false) en production</strong> et de limiter son utilisation à des fins de tests et de développement.</li>
</ul>
<h2 id="architecture-de-unified-stock">Architecture de Unified Stock</h2>
<p>Le produit Unified Stock est composé de plusieurs modules, d&#39;un ensemble de traitements ainsi que d&#39;une base de données REDIS que nous allons maintenant détailler.</p>
<h3 id="modules-dintégration-parsage-des-flux-de-stock">Module(s) d&#39;intégration (parsage) des flux de stock</h3>
<p>Cette partie spécifique sert à interfacer vos flux de stock avec le module de traitement des stocks de Unified Stock afin qu&#39;ils respectent le standard d&#39;Altazion. Concrètement, il s&#39;agit d&#39;un ou plusieurs module(s) dédié(s) à faire de l&#39;échange de données informatisées (EDI).</p>
<p>Le fonctionnement des flux de stock étant unique pour chaque client, n&#39;hésitez pas à vous rapprocher d&#39;Altazion Services pour le développement de votre/vos module(s).</p>
<p>Altazion propose un module d&#39;intégration des flux de stocks basé sur le parsage de fichiers aux formats Excel (xls, xlsx) vous permettant de facilement tester le fonctionnement de Unified Stock.
Pour plus d&#39;informations sur ce module, consultez la page de documentation dédiée à Xls Stock Parser.</p>
<h3 id="module-de-traitement-des-stocks">Module de traitement des stocks</h3>
<p>Il s&#39;agit d&#39;un serveur API conçu pour réceptionner les mouvements de stocks depuis votre système d&#39;information et les caractéristiques des stocks en provenance des sources d&#39;approvisionnement afin de recalculer les disponibilités en temps réel. Les disponibilités recalculées sont envoyées directement à Delivery Optimizer et publiées sur une file de messages pour être enregistrée de façon asynchrone dans la base de données SQL principale. </p>
<p>Pour plus d&#39;informations sur ce module, consultez la page de documentation dédiée.</p>
<h3 id="base-de-données-redis">Base de données REDIS</h3>
<p>Unified Stock utilise le cache REDIS du produit Orchestrator pour le stockage des données pertinentes au calcul des disponibilités.</p>
<p>Ce cache jouant un rôle central dans le fonctionnement de Unified Stock, les performances de ce dernier ont un impact direct sur les capacités de traitement de US et sur sa réactivité.</p>
<p><strong>Attention :</strong> REDIS étant un cache mémoire, Altazion recommande vivement de définir une politique de sauvegarde périodique afin d&#39;éviter toutes pertes de données éventuelles dû à un redémarrage de la base.</p>
<p>Le cache REDIS d&#39;Orchestrator contient 16 bases de données qui permettent de partitionner les données stockées. Unified Stock utilise la <strong>DB0</strong> pour le stockages des valeurs actuelles des données et la <strong>DB1</strong> pour conserver un historique des valeur des données.</p>
<h3 id="traitement-de-synchronisation-régulière-des-stocks">Traitement de synchronisation régulière des stocks</h3>
<p>Unified Stock dispose d&#39;un batch permettant d&#39;enregistrer régulièrement en base SQL les stocks modifiés depuis la dernière synchronisation.</p>
<p>Ce batchs se déclenche toutes les 30 secondes mais la synchronisation ne s&#39;exécute que si au moins une de ces deux conditions est rencontrée :</p>
<ul>
<li>Le nombre de stocks modifiés doit atteindre ou dépasser un certain seuil. Par défaut à 1000, ce seuil est paramétrable via la variable d&#39;environnement <strong>&quot;SYNC_IMSTOCK_DB_THRESHOLD&quot;</strong>.</li>
<li>Un certain temps en secondes s&#39;est écoulé depuis la dernière synchro. Par défaut à 600 secondes (10 minutes), ce temps est paramétrable via la variable d&#39;environnement <strong>&quot;SYNC_IMSTOCK_DB_TIME_TRIGGER&quot;</strong>.</li>
</ul>
<p>La combinaison de ces deux conditions permet de faire en sorte que les stocks en base de données soient mis à jour suffisamment régulièrement, même si peu de stocks sont modifiés durant une certaine période.</p>
<h3 id="enregistrement-asynchrone-des-disponibilités">Enregistrement asynchrone des disponibilités</h3>
<p>Après le calcul des disponibilités le module de traitement des stocks publie les résultats dans une file de messages. Ces résultats contiennent les quantités disponibles à la vente sur chaque canal de vente pour une combinaison article/source approvisionnement.</p>
<p>La file est ensuite lue par un programme chargé de synchroniser les disponibilités avec celles de la base de données SQL principale.</p>
<p>Cette synchronisation a lieu de façon asynchrone car on considère que Delivery Optimizer (qui lui est mis à jour en temps réel), est le référentiel des disponibilités. La table en base de données est principalement mise à jour afin de permettre une consultation informative des disponibilités.</p>
<h3 id="schéma-de-larchitecture-de-unified-stock">Schéma de l&#39;architecture de Unified Stock</h3>
<p>Le schéma ci-dessous représente l&#39;architecture complète de Unified Stock. Les composants Unified Stock sont colorés en violet, les autres composants de l&#39;OMS sont en vert :</p>
<p><img src="img/archiUnifiedStock.png" alt="Schéma de l&#39;architecture de Unified Stock"></p>
<p>À noter que ce schéma utilise le module d&#39;intégration des flux de stocks Xls Stock Parser fourni par Altazion. La configuration de la partie en gris (partie spécifique client) est propre à chaque client et différera donc de celle du schéma.</p>
<h2 id="sécurisation-du-module">Sécurisation du module</h2>
<p>Si vous déployez Unified Stock sur vos propres serveurs, la configuration de sécurité se compose d&#39;un couple user/mot de passe pour l&#39;administration. Ces données doivent être fournies via <a href="ENV_UNIFIEDSTOCK.html">des variables d&#39;environnements</a> : </p>
<ul>
<li>ALTAZION_UNIFIED_STOCK_USER</li>
<li>ALTAZION_UNIFIED_STOCK_PSW</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/altazion/altazion-dev/blob/e46297dbf63e630f368d9d8763e4f17d8fabca6f/orchestrator/unified-stock/presentationproduit.md/#L1" class="contribution-link">Aidez nous &#224; am&#233;liorer cette documentation</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5></h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
          </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
