<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
  
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-17974923-7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
  
      gtag('config', 'UA-17974923-7');
    </script>
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Raisons juridiques et configuration du module | Aide - Altazion</title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Raisons juridiques et configuration du module | Aide - Altazion">
    <meta name="generator" content="docfx 2.56.7.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  
  
  
  
  
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <ul>
                  <li class="title"><a href="/"><img src="https://aide.altazion.com/logo.png"></a></li>
                  <li class="subtitle"><span>Aide</span></li>
                  <li class="item" id="lnkSiteAide"><a href="https://aide.altazion.com">Utilisateurs</a></li>
                  <li class="item" id="lnkSiteDev"><a href="https://www.altazion.dev">Développeurs</a></li>
                  <li class="item" id="lnkSiteInterne" style="display:none"><a href="https://e-doc-dev.azurewebsites.net">Doc interne</a></li>
                  <li class="item" id="lnkSiteLearning" style="display:none"><a href="https://www.altazion-learning.com">e-learning</a></li>
              </ul>
              
              <script type="text/javascript">
              
                  function checkAndActivate(domain, ctl) {
                      fetch("https://" + domain).then(function (data) {
                          ctl.style.display = null;
                      }).catch(function (e) {
                          return;
                      });
                  }
              
                  var loc = document.location.hostname;
                  loc = loc.toLowerCase();
              
                  if (loc == "aide.altazion.com") {
                      lnkSiteAide.classList.add("selected");
                  }
                  else if (loc == "www.altazion.dev")
                      lnkSiteDev.classList.add("selected");
                  else if (loc == "www.altazion-learning.com") {
                      lnkSiteLearning.style.display = null;
                      lnkSiteLearning.classList.add("selected");
                  }
                  else if (loc == "e-doc-dev.azurewebsites.net") {
                      lnkSiteInterne.style.display = null;
                      lnkSiteInterne.classList.add("selected");
                  }
              
                  checkAndActivate("www.altazion-learning.com", lnkSiteLearning);
                  checkAndActivate("e-doc-dev.azurewebsites.net", lnkSiteInterne);
              
              </script>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle"></a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="raisons-juridiques-et-configuration-du-module">Raisons juridiques et configuration du module</h1>

<h2 id="support-de-multiples-raisons-juridiques">Support de multiples raisons juridiques</h2>
<p>Le module Delivery Optimizer (DO) est prévu pour supporter plusieurs raisons juridiques, c&#39;est à dire qu’elles peuvent coexister sans que l’une puisse accéder aux données d’une autre. Ceci peut être utile si vous souhaitez utiliser le module DO pour plusieurs marques ou zones géographiques par exemple.</p>
<p>Au sein du module il s’agit un nombre entier strictement supérieur à 0 nommé tenantId qu’il sera nécessaire de renseigner dans la route de chaque appel API afin d’indiquer au module quelle raison juridique est concernée par l’appel.</p>
<p>Les raisons juridiques sont sauvegardées en base et disposent de caractéristiques supplémentaires :</p>
<ul>
<li>Une configuration afin de pouvoir personnaliser l’utilisation du module DO.</li>
<li>Des utilisateurs disposant de droits spécifiques</li>
</ul>
<h2 id="configuration-du-module">Configuration du module</h2>
<p>Chaque raison juridique dispose d’une configuration afin de pouvoir personnaliser son utilisation du module DO.</p>
<p>La configuration est ajoutée par Altazion au moment de la création des raisons juridiques. Si vous utilisez les outils OMS fournis par Altazion, l’édition de la configuration se fera depuis votre gestion commerciale dans les options des sources d’approvisionnement.</p>
<p>Autrement il est possible de modifier la configuration en appelant l&#39;un des points API suivant :</p>
<p><strong>PUT : {tenantId}/sfs-config</strong></p>
<p><strong>PUT : {tenantId}/config</strong></p>
<p><img src="img/SwaggerDoConfig.png" alt="Point API Swagger de config du module DO"></p>
<p>Pour utiliser ce point, il est nécessaire de passer un objet de type <strong>ConfigDo</strong> dans le body de la requête. </p>
<p>L&#39;objet <strong>ConfigDo</strong> contient les champs suivants :</p>
<ul>
<li><strong>cartLifeSpan</strong> (défaut : 15). Détermine la durée de validité en minutes d&#39;un panier. Lorsqu&#39;elle est dépassée, les stocks réservés par le panier ne sont plus compatibilisés par Delivery Optimizer et le panier est supprimé.</li>
<li><strong>algoType</strong> (défaut : &quot;PUSH&quot;). Détermine le type d&#39;algorithme utilisé par Delivery Optimizer. À ce jour, seul l&#39;algorithme PUSH existe.</li>
<li><strong>maxOrderable</strong> (défaut : &quot;MINIMUM). Détermine la méthode de calcul de la quantité maximum de stock commandable pour un produit.</li>
<li><strong>maxShipments</strong> (défaut : illimité). Détermine le nombre maximum d&#39;expéditions différentes pour une commande/un panier. Autrement dit, il s&#39;agit du nombre maximum d&#39;origines de stock différentes qui peuvent être sollicitées pour le traitement d&#39;une commande/un panier. Concrètement, il s&#39;agit de la taille maximum du tableau <strong>DoResponse.splits</strong>. Si ce nombre est dépassé, toutes les lignes du panier sont concidérées comme étant non expédiables et sont donc renvoyées dans le champ <strong>DoResponse.nonShippable</strong>.</li>
<li><strong>enableInternalOrderSync</strong> (défaut : false). Si true, active la synchronisation périodique interne au module des commandes contenus dans REDIS vers MongoDB. À mettre à false si vous utilisez une méthode de synchronisation externe, via un batch ou le point API de synchro des commandes par exemple.</li>
</ul>
<p>Comme pour tous les autres points API, vous pouvez retrouver la définition de l&#39;objet en anglais dans le swagger du module :</p>
<p><img src="img/DetailDoConfig.png" alt="Detail de l&#39;objet DoConfig"></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/altazion/altazion-dev/blob/5d343a6732c03f23408cdebba58ff02bdc7bcb8a/orchestrator/delivery-optimizer/raisonjuridiqueetconfig.md/#L1" class="contribution-link">Aidez nous &#224; am&#233;liorer cette documentation</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5></h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
          </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
